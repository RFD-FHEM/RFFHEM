defmod test_loadprotohash UnitTest dummyDuino 
(
 {
    note("read test from test_loadprotohash-definition.txt");

    plan tests => 3;
    my %ret= SIGNALduino_LoadProtocolHash("dummy.hash");
    ok(exists($ret{error}),"check with wrong filename");
    
    subtest 'Good SD_PROTOCL_DATA' => sub {
		plan tests => 1;
    
    	%ret= SIGNALduino_LoadProtocolHash("$attr{global}{modpath}/FHEM/lib/test_loadprotohash-ok.pm");
    	is($ret{error},undef,"check filename and syntax ok ");
	};
	
	subtest 'Bad SD_PROTOCL_DATA' => sub {
		plan tests => 1;
	 
    	%ret= SIGNALduino_LoadProtocolHash("$attr{global}{modpath}/FHEM/lib/test_loadprotohash-nok.pm");
    	ok(exists($ret{error}),"check filename and syntax not ok "); 
	};
	our %ProtocolListSIGNALduino = SIGNALduino_LoadProtocolHash("$attr{global}{modpath}/FHEM/lib/SD_ProtocolData.pm");
	
    SIGNALduino_IdList("x:$target","","","");  
 }
);
