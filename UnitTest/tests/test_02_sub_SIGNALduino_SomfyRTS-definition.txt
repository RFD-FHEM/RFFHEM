defmod test_02_sub_SIGNALduino_SomfyRTS UnitTest dummyDuino ( 
{ 
	use Test2::V0;
	use Test2::Tools::Compare qw{ is isnt };

	# note: sub SIGNALduino_SomfyRTS use SIGNALduino_b2h

	subtest 'Test SomfyRTS' => sub {
		plan(3);
		my $id=43;
		my ($rcode,$hexresult);

		subtest 'mcbitnum != 57' => sub {
			plan(2);
			my $bitdata='10011000110110111101000101010011110101100011000110111011';

			($rcode,$hexresult)=SIGNALduino_SomfyRTS(undef,$target,$bitdata,$id,length $bitdata);
			is($rcode,1,"check returncode for SomfyRTS transmission");
			is($hexresult,'98DBD153D631BB','check result SomfyRTS');
		};


		subtest 'mcbitnum == 57' => sub {
			plan(2);
			my $bitdata='110011000110110111101000101010011110101100011000110111011';

			($rcode,$hexresult)=SIGNALduino_SomfyRTS(undef,$target,$bitdata,$id,length $bitdata);
			is($rcode,1,"check returncode for SomfyRTS transmission");
			is($hexresult,'98DBD153D631BB','check result SomfyRTS');
		};
		

		subtest 'mcbitnum not defined' => sub {
			plan(2);
			my $bitdata='10011000110110111101000101010011110101100011000110111011';

			($rcode,$hexresult)=SIGNALduino_SomfyRTS(undef,$target,$bitdata,$id,undef);
			is($rcode,1,"check returncode for SomfyRTS transmission");
			is($hexresult,'98DBD153D631BB','check result SomfyRTS');
		};
	};
}
)

