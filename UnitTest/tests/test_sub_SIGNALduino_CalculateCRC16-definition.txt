defmod test_sub_SIGNALduino_CalculateCRC16 UnitTest dummyDuino ( 
{
	# note: sub SIGNALduino_CalculateCRC16 is for sub SIGNALduino_PCA301
	use Test2::V0;
	use Test2::Tools::Compare qw{is};

	subtest 'Tests sub CalculateCRC16' => sub {
		plan(1);
	
		subtest 'Test Protocol 101 (PCA 301) - sub work' => sub {
			plan(2);

			my $poly = 0x8005;
			my $crc16 = 0x0000;
			my $dmsg = "0405019E8700AAAAAAAA";
			note("dmsg one - $dmsg");

			my ($chk16) = SIGNALduino_CalculateCRC16($dmsg,$poly,$crc16);
			is($chk16,3859,"check crc16 for PCA 301 dmsg one");

			$dmsg = "010503B7A101AAAAAAAA";
			note("dmsg two - $dmsg");
			$chk16 = SIGNALduino_CalculateCRC16($dmsg,$poly,$crc16);
			is($chk16,29842,"check crc16 for PCA 301 dmsg two");
		};
	};
}
)
