defmod test_sub_SIGNALduino_HE800 UnitTest dummyDuino ( 
{ 
	use Test2::V0;
	use Test2::Tools::Compare qw{ is isnt };

	subtest 'Test HE800, protolength < 40' => sub {
		plan(2);

		my @bits=qw(0 0 0 1 1 0 1 0 1 1 1 0 0 0 1 0 1 0 0 0 0 0 1 0 1 0 1 0);
		my $rcode;
		note('input '.@bits.' bits');

		($rcode,@bits)=SIGNALduino_HE800($target,@bits);
		is($rcode,1,'check returncode for HE800 transmission');
		is(@bits,40,'check result protolength');
	};
		
	subtest 'Test HE800, protolength == 40' => sub {
		plan(2);

		my @bits=qw(0 0 0 1 1 0 1 0 1 1 1 0 0 0 1 0 1 0 0 0 0 0 1 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0);
		my $rcode;

		note('input '.@bits.' bits');
		($rcode,@bits)=SIGNALduino_HE800($target,@bits);
		is($rcode,1,'check returncode for HE800 transmission');
		is(@bits,40,'check result protolength');
	};

	subtest 'Test HE800, protolength > 40' => sub {
		plan(2);

		my @bits=qw(0 0 0 1 1 0 1 0 1 1 1 0 0 0 1 0 1 0 0 0 0 0 1 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0);
		my $rcode;

		note('input '.@bits.' bits');
		($rcode,@bits)=SIGNALduino_HE800($target,@bits);
		is($rcode,1,'check returncode for HE800 transmission');
		is(@bits,42,'check result protolength');
	};
}
)